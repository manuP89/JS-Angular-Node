<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Caso Práctico 4</title>
	<h1>Resolución suya CP4</h1>
	<script type="text/javascript">
		function descarga(){
			
			//var ajax=new XMLHttpRequest();
			
			if (window.XMLHttpRequest){
				// code for IE7+, Firefox, Chrome, Opera, Safari
				var ajax=new XMLHttpRequest();
			}
			else{
				// code for IE6, IE5
				var ajax=new ActiveXObject("Microsoft.XMLHTTP");
			}
			ajax.onreadystatechange=function(){
				if (ajax.readyState==4 && ajax.status==200){
					var posts=ajax.responseText;
					var postsJSON=JSON.parse(posts);
					var listaHTML="";
					var lista = document.getElementById('lista')

/*					for(var i in postsJSON){
						listaHTML+="<li>"+postsJSON[i].title+"</li>";
					}
					var lista = document.getElementById('lista');
					lista.innerHTML=listaHTML;

se puede hacer de las dos maneras
*/					for(var i in postsJSON){
						var item = document.createElement("li");
						var texto = document.createTextNode(postsJSON[i].title);

						item.appendChild(texto);
						lista.appendChild(item);
					}

				}

			}
			ajax.open("GET","http://jsonplaceholder.typicode.com/posts",true);
			ajax.send();

		}
	</script>
</head>
<body>

	<ul id="lista">
	</ul>

	<button onclick="descarga()">Descargar</button>

</body>
</html>